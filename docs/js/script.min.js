"use strict";function setRange(){let e=document.querySelector(".form__range"),t=document.querySelector(".form__value");e.addEventListener("change",()=>{let s=e.value;t.innerHTML=s})}function showInfo(){const e=document.querySelectorAll(".form__info"),t=document.querySelectorAll(".form__info-block");e.forEach((s,c)=>{s.addEventListener("click",()=>{s.classList.contains("active")?(s.classList.remove("active"),t[c].classList.remove("active")):(e.forEach(e=>{e.classList.remove("active")}),t.forEach(e=>{e.classList.remove("active")}),s.classList.add("active"),t[c].classList.add("active"))})})}function addFile(){let e=document.querySelector(".form__file"),t=document.querySelector(".form__file-name-size");const s=document.querySelector(".form__file-box"),c=document.querySelector(".form__key");e.addEventListener("change",()=>{const n=e.files[0].size,o=e.files[0].name,r=document.querySelector(".form__weight");n<10485760?(t.textContent=`${o}, ${function(e){if(Math.round(e/1024/1024)<=0)return e=.1}(n)} мб`,s.classList.add("active"),c.classList.add("active"),r.classList.remove("active"),(e.value="")&&(t.textContent="",s.classList.remove("active"),c.classList.remove("active"),r.classList.remove("active"))):r.classList.add("active")}),function(e,t,s){document.querySelector(".form__file-clean").addEventListener("click",()=>{e.textContent="",t.classList.remove("active"),s.classList.remove("active")})}(t,s,c)}function select(){const e=document.querySelector("#category"),t=document.querySelector("#category-div"),s=document.querySelector(".form__select"),c=document.querySelectorAll(".form__select-value"),n=document.querySelectorAll(".form__select-name");t.addEventListener("click",()=>{s.classList.toggle("active"),t.classList.toggle("active"),t.style.color="black"}),c.forEach((s,c)=>{s.addEventListener("click",()=>{e.value=n[c].textContent,t.textContent=n[c].textContent})}),n.forEach(e=>{e.addEventListener("click",()=>{s.classList.remove("active")})})}function resizeTextarea(){document.querySelectorAll("textarea").forEach(e=>{e.addEventListener("keyup",(function(){this.scrollTop>0&&(this.style.height=this.scrollHeight+"px")}))})}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#form"),t=document.querySelector(".form__alert");function s(e){e.parentElement.classList.add("_empty"),e.classList.add("_empty"),"text"===e.type?e.value="Обязательное поле!":e.textContent="Обязательное поле!"}function c(e){e.parentElement.classList.remove("_empty"),e.classList.remove("_empty"),e.addEventListener("click",()=>{e.classList.remove("_empty"),e.parentElement.classList.remove("_empty"),"text"===e.type?e.value="":e.textContent="Не выбрано"})}function n(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function r(e){return/${1}/.test(e.value)}e.addEventListener("submit",(async function(a){a.preventDefault();let l=function(e){let t=0,a=document.querySelectorAll("._required");for(let e=0;e<a.length;e++){const l=a[e];o(l),c(l),l.classList.contains("_email")?r(l)&&(n(l),t++):"checkbox"===l.getAttribute("type")&&!1===l.checked?(n(l),t++):""===l.value||"Не выбрано"===l.textContent?(s(l),t++):"Обязательное поле!"!==l.value&&"Обязательное поле!"!==l.textContent||(s(l),t++)}return t}(),i=new FormData(e);if(0===l){e.classList.add("_sending"),(await fetch("server.php",{method:"POST",body:i})).ok?(e.reset(),t.classList.remove("active"),e.classList.remove("_sending")):(t.classList.remove("active"),alert("Ошибка отправки на сервер - server.php"),e.classList.remove("_sending"))}else t.classList.add("active")}))}),document.getElementById("date").valueAsDate=new Date,setRange(),showInfo(),addFile(),select(),resizeTextarea();